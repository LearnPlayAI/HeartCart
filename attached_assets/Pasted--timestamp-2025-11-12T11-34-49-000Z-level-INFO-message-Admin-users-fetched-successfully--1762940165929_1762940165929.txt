{"timestamp":"2025-11-12T11:34:49.000Z","level":"INFO","message":"Admin users fetched successfully","context":{"userCount":20,"total":"121","page":1,"totalPages":7}}
{"timestamp":"2025-11-12T11:34:49.000Z","level":"INFO","message":"Retrieved 14 orders with items"}
{"timestamp":"2025-11-12T11:34:49.000Z","level":"INFO","message":"Admin orders fetched successfully","context":{"orderCount":14}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"PUBLICATION ROUTE: Starting publication process","context":{"draftId":1412,"draftName":"InsuBalance + Energy","hasAttributesData":true}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"Starting complete product publication with all fields","context":{"draftId":1412}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"Processing complete draft data","context":{"draftId":1412,"name":"InsuBalance + Energy","isUpdate":false,"fieldsCount":63,"draftRating":4.2,"draftReviewCount":112,"debugRatingValue":4.2,"debugReviewCountValue":112}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"WARN","message":"Found existing product with same slug, treating as update","context":{"draftId":1412,"slug":"insubalance-energy","existingProductId":1368}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"üîç COST PRESERVATION DEBUG (Complete Service)","context":{"draftId":1412,"draftCostPriceField":"600.02","draftCostPrice":600.02,"existingCostPrice":"400.00","willPreserveCost":false,"isUpdate":false,"allDraftFields":[{"costPrice":"600.02"}]}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"Creating new product with all fields"}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"ERROR","message":"Complete publication failed - transaction rolled back","context":{"draftId":1412,"error":"duplicate key value violates unique constraint \"products_slug_unique\"","stack":"error: duplicate key value violates unique constraint \"products_slug_unique\"\n    at cn.parseErrorMessage (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1182:6)\n    at cn.handlePacket (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1143:13)\n    at cn.parse (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1127:36)\n    at v.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1190:16)\n    at v.emit (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:397:12)\n    at WebSocket.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:987:80)\n    at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:290:14)\n    at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:209:9)\n    at WebSocket.emit (node:events:524:28)\n    at Receiver.receiverOnMessage (/home/runner/workspace/node_modules/ws/lib/websocket.js:1220:20)\n    at Receiver.emit (node:events:524:28)\n    at Receiver.dataMessage (/home/runner/workspace/node_modules/ws/lib/receiver.js:569:14)\n    at Receiver.getData (/home/runner/workspace/node_modules/ws/lib/receiver.js:496:10)\n    at Receiver.startLoop (/home/runner/workspace/node_modules/ws/lib/receiver.js:167:16)\n    at Receiver._write (/home/runner/workspace/node_modules/ws/lib/receiver.js:94:10)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at TLSSocket.socketOnData (/home/runner/workspace/node_modules/ws/lib/websocket.js:1355:35)\n    at TLSSocket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)"}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"INFO","message":"PUBLICATION ROUTE: Publication completed","context":{"draftId":1412,"success":false}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"ERROR","message":"Atomic publication failed","context":{"draftId":1412,"error":"duplicate key value violates unique constraint \"products_slug_unique\""}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"ERROR","message":"Error in atomic publication","context":{"error":{"code":"BAD_REQUEST","statusCode":400,"isOperational":true},"draftId":1412}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"WARN","message":"[BAD_REQUEST] Failed to publish product. Please try again.","context":{"path":"/api/product-drafts/1412/publish","method":"POST","error":{"code":"BAD_REQUEST","statusCode":400,"isOperational":true}}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"ERROR","message":"API Error: Failed to publish product. Please try again.","context":{"statusCode":400,"errorCode":"BAD_REQUEST"}}
{"timestamp":"2025-11-12T11:35:02.000Z","level":"WARN","message":"API WARN: POST /api/product-drafts/1412/publish 400 in 313ms","context":{"method":"POST","path":"/api/product-drafts/1412/publish","statusCode":400,"duration":"313ms","isHttpError":true,"isSlowRequest":false,"isApiFailure":true}}
POST /api/product-drafts/1412/publish 400 in 313ms :: {"success":false,"error":‚Ä¶