Analysis Overview
The issue appears to be in the PDF viewer component and the PDF serving route. Here's my complete analysis:

1. Frontend Analysis - PDF Viewer Component
Looking at the PDFViewer component in client/src/pages/admin/order-detail.tsx:

Issues Found:
Incorrect PDF URL Construction: The component constructs the PDF URL as:

const pdfUrl = `/api/orders/${orderId}/proof?t=${Date.now()}`;
But this should be /api/orders/${orderId}/proof without the cache-busting parameter for PDF documents.

Multiple Rendering Attempts: The component tries multiple fallback approaches:

<object> tag with <embed> fallback
Manual error handling for iframe loading
The loading state management is complex and may cause timing issues
Event Handlers May Not Work: The onLoad and onError handlers on the <object> tag may not fire reliably across different browsers for PDF content.

2. Backend Analysis - PDF Serving Route
From server/routes.ts and [server/routes.ts], the PDF serving route:

Route Implementation:
app.get('/api/orders/:id/proof', async (req, res) => {
  // ... authentication and order lookup
  const { data: fileData } = await objectStore.getFileAsBuffer(order.eftPop);
  
  // Headers set correctly
  res.setHeader('Content-Type', 'application/pdf');
  res.setHeader('Content-Disposition', `inline; filename="proof-of-payment-${order.orderNumber}.pdf"`);
  // ... other headers
  
  res.end(fileData);
});
Potential Issues:
Missing Authentication Check: The route bypasses the response wrapper middleware but doesn't seem to have proper authentication validation for admin access.

Error Handling: If objectStore.getFileAsBuffer() fails, the error response format might not be compatible with the PDF viewer expectations.

CORS Headers: While CORS headers are set, the X-Frame-Options: SAMEORIGIN might conflict with iframe embedding in some scenarios.

3. Object Store Analysis
From server/object-store.ts, the file retrieval:

Issues Found:
Buffer Handling: The getFileAsBuffer method has complex retry logic and buffer conversion that could potentially corrupt PDF data:

if (Buffer.isBuffer(result.value)) {
  data = result.value;
} else if (Array.isArray(result.value)) {
  data = Buffer.from(result.value[0] || '');
}
Content Type Detection: The method tries to detect content type from filename, but for PDFs this should be straightforward.

4. Order Data Analysis
From the console logs, I can see that order 15 exists and has been accessed successfully. The issue is specifically with the PDF rendering, not data retrieval.

5. Root Cause Analysis
Based on the complete analysis, the most likely root causes are:

Primary Issue: PDF Viewer Component Logic
The PDFViewer component has flawed loading state management and error handling. The onLoad and onError handlers on the <object> tag are unreliable for PDF content, causing the component to get stuck in a loading state or show false errors.

Secondary Issues:
Browser Compatibility: The fallback chain from <object> to <embed> to error message is not handling all browser scenarios properly.

Timing Issues: The loading state is set to false in handleIframeLoad() but the event handlers may never fire for PDF objects.

Cache-Busting Parameter: The timestamp parameter in the URL might interfere with PDF plugins in some browsers.

6. Console Evidence
From the logs, I can see the PDF route is being accessed:

{"timestamp":"2025-05-31T18:25:45.000Z","level":"DEBUG","message":"API Request: GET /api/admin/orders/15"
But there's no evidence of the PDF proof endpoint being called, suggesting the frontend isn't properly triggering the PDF load or is encountering an error before making the request.

Recommendations
The root cause is primarily in the frontend PDF viewer component's event handling and state management. The component needs to be refactored to:

Simplify the loading state logic
Remove unreliable event handlers
Use a more direct approach for PDF display
Add proper error boundaries
Consider using a dedicated PDF viewer library
The backend PDF serving appears to be working correctly based on the implementation, but could benefit from improved error handling and logging.